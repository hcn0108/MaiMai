
@{
    ViewBag.Title = "Index";
}

<html lang="zh-tw">
<head>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4UTN8dWiT3p-Dxnt0W3F1AzV8MUfrsGA">
    </script>
    <style>
        .map {
            width: 750px;
            height: 750px;
            border: 1px solid gray;
        }
        img {
            
        }
    </style>
</head>
<body>
    <div class="container" style="padding-top:100px">
        <h2>顯示附近的訂單</h2>
        <div id="map" class="map"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
        var CurrentPos;
        $(function () {

            //function initMap() {
            var latlng = { lat: 25.046891, lng: 121.516602 }; // 給一個初始位置
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14, //放大的倍率
                center: latlng, //初始化的地圖中心位置
                mapTypeControl: false,
                scaleControl: false,
                streetViewControl: false,
                rotateControl: false,
                fullscreenControl: false,
                styles: [{
                    visibility: 'off',
                }],
            });
            var marker = new google.maps.Marker({
                position: latlng,
                map: map
            });


            if (navigator.geolocation) {

                navigator.geolocation.getCurrentPosition(function (position) {
                    CurrentPos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };


                    var marker = new google.maps.Marker({
                        title: "現在位置",
                        icon: {
                            url: '/Content/resource_nico/logoTOPwithoutBG.png',
                                 scaledSize: new google.maps.Size(100, 100)
                        },
                        draggable: true,
                        stylers: [{
                            visibility: 'off'
                        }],
                        position: CurrentPos,
                        map: map
                    });



                    map.setZoom(17);
                    map.setCenter(CurrentPos);


                    let cityCircle = new google.maps.Circle({
                        strokeColor: '#f1c40f', // 線條顏色
                        strokeOpacity: 1, // 線條透明度
                        strokeWeight: 5, // 線條粗度
                        fillColor: '#f1c40f', // 圓形裡填滿的顏色
                        fillOpacity: 0.35, // 圓形裡，填滿顏色的透明度
                        map,
                        // 中心點
                        center: CurrentPos,
                        // 半徑
                        radius: 2000
                    });

                });
            }
            else
            {
                        // Browser doesn't support Geolocation
                        alert("未允許或遭遇錯誤！");
             }

      





        })//end of document ready


    </script>

</body>

</html>